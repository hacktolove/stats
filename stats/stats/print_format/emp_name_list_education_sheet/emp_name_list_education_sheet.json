{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-09-19 13:43:26.461674",
 "css": ".print-format td {\n    padding:3px !important;\n}\n\n@media print {\n    .letter-head-footer {\n      position: fixed ;\n      bottom: 0%;\n      left:0% ;\n      right:0%;\n      z-index:-1;\n    }\n}",
 "custom_format": 1,
 "default_print_language": "ar",
 "disabled": 0,
 "doc_type": "Education Allowance Sheet ST",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{%- from \"templates/print_formats/standard_macros.html\" import add_header, render_field, print_value, fieldmeta, get_width, get_align_class with context -%}\n\n{% if print_settings.repeat_header_footer %}\n    <div id=\"header-html\">\n        {% if letter_head and not no_letterhead %}\n            <div class=\"letter-head\">{{ letter_head }}</div>\n        {% else%}\n             <div>\n               <table>\n                <tr></tr>\n               </table>\n               </div>\n        {% endif %}\n   </div>\n{% endif %}\n\n<div style=\"font-size:14pt; color:black; \">\n    {% if doc.education_allowance_sheet_details|length > 0%}\n    {% set educational_year = frappe.db.get_value(\"Education Allowance Request ST\", doc.education_allowance_sheet_details[0].education_allowance_request_reference, \"educational_year\") %}\n    {% endif %}\n    {% set arabic_month_mapping = {\n        \"January\" : \"\u064a\u0646\u0627\u064a\u0631\",\n        \"February\" : \"\u0641\u0628\u0631\u0627\u064a\u0631\",\n        \"March\" : \"\u0645\u0627\u0631\u0633\",\n        \"April\" : \"\u0623\u0628\u0631\u064a\u0644\",\n        \"May\" :\"\u0645\u0627\u064a\u0648\",\n        \"June\" :\"\u064a\u0648\u0646\u064a\u0648\",\n        \"July\" : \"\u064a\u0648\u0644\u064a\u0648\",\n        \"August\" :\"\u0623\u063a\u0633\u0637\u0633\",\n        \"September\" :\"\u0633\u0628\u062a\u0645\u0628\u0631\",\n        \"October\" :\"\u0623\u0643\u062a\u0648\u0628\u0631\",\n        \"November\" :\"\u0646\u0648\u0641\u0645\u0628\u0631\",\n        \"December\" : \"\u062f\u064a\u0633\u0645\u0628\u0631\",\n    } %}\n   \n   {% set month = frappe.utils.getdate(doc.creation_date).strftime(\"%B\") %}\n   \n    <h2 style=\"text-align:center; font-weight:bold;\">\n        \u0628\u064a\u0627\u0646 \u0628\u0623\u0633\u0645\u0627\u0621 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646 \u0644\u0628\u062f\u0644 \u0627\u0644\u062a\u0639\u0644\u064a\u0645 \u0639\u0627\u0645 ({{  educational_year}}) \u0645 \u0634\u0647\u0631 ({{ arabic_month_mapping[month] }})\n    </h2>\n    \n    <table style=\"font-size:13pt; color:black; width:100%; border:1px solid black; direction:rtl; table-layout:fixed; margin-top:30px;\">\n        <thead>\n            <tr>\n                <td style=\"background-color:#d3d3d3; font-weight:bold; text-align:center; direction:rtl; width:10%; border:1px solid black;\">\u0645</td>\n                <td style=\"background-color:#d3d3d3; font-weight:bold; text-align:center; direction:rtl; width:30%; border:1px solid black;\">\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641</td>\n                <td style=\"background-color:#d3d3d3; font-weight:bold; text-align:center; direction:rtl; width:15%; border:1px solid black;\">\u0639\u062f\u062f \u0627\u0644\u0623\u0628\u0646\u0627\u0621</td>\n                <td style=\"background-color:#d3d3d3; font-weight:bold; text-align:center; direction:rtl; width:30%; border:1px solid black;\">\u0627\u0644\u0625\u062f\u0627\u0631\u0629</td>\n                <td style=\"background-color:#d3d3d3; font-weight:bold; text-align:center; direction:rtl; width:15%; border:1px solid black;\">\u0627\u0644\u062f\u0631\u062c\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629</td>\n            </tr>\n        </thead>\n        \n        <tbody>\n            {% set tk = namespace(total_kids = 0) %}\n            {% set unique_employee = [] %}\n            {% set c = namespace(counter = 0) %}\n            \n            {% set unique_emps = [] %}\n            {% for d in doc.education_allowance_sheet_details %}\n                {% if d.employee_no not in unique_emps %}\n                    {{ unique_emps.append(d.employee_no) or \"\" }}\n                {% endif %}\n            {% endfor %}\n            \n            {% set emp_map = {} %}\n            {% for emp in unique_emps %}\n                {{ emp_map.update({emp : {\"no_of_child\": 0, \"season\": '', \"amnt\" : 0}}) or \"\" }}\n            {% endfor %}\n            \n            {% for emp in unique_emps %}\n                {% for d in doc.education_allowance_sheet_details %}\n                    {% if d.employee_no == emp %}\n                        {% set no_of_kids = frappe.db.get_value(\"Education Allowance Request ST\", d.education_allowance_request_reference , \"no_of_kids\") %}\n                        {% set season = frappe.db.get_value(\"Education Allowance Request ST\", d.education_allowance_request_reference , \"season\") %}\n                        {{ emp_map[emp].update({\"no_of_child\" : emp_map[emp]['no_of_child'] + no_of_kids, \"season\" : season, \"amnt\" : emp_map[emp]['amnt'] + d.approved_amount}) or \"\" }}\n                    {% endif %}\n                {% endfor %}\n            {% endfor %}\n            \n            {% for row in doc.education_allowance_sheet_details %}\n                {% if row.employee_no not in unique_employee %}\n                    {{ unique_employee.append(row.employee_no) or \"\"}}\n                    {% set c.counter = c.counter + 1 %}\n                    {% set sub_department = frappe.db.get_value(\"Department\", row.sub_department, \"department_name\") %}\n                    <tr>\n                        <td style=\"text-align:center; border:1px solid black;\">{{ c.counter }}</td>\n                        <td style=\"text-align:center; border:1px solid black;\">{{ row.employee_name }}</td>\n                        <td style=\"text-align:center; border:1px solid black;\">{{ emp_map[row.employee_no]['no_of_child'] }}</td>\n                        <td style=\"text-align:center; border:1px solid black;\">{{ sub_department }}</td>\n                        <td style=\"text-align:center; border:1px solid black;\">{{ row.grade }}</td>\n                    </tr>\n                {% endif %}\n            {% endfor %}\n        </tbody>\n    </table>\n    \n</div>\n\n{% if print_settings.repeat_header_footer %}\n<div id=\"footer-html\">\n    {% if footer %}\n    <div class=\"letter-head-footer\"> {{ footer }} </div>\n    {% endif %}\n    <p class=\"text-center small page-number visible-pdf\">\n        {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }} </p>\n</div>\n{% endif %}",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-09-29 15:20:44.413581",
 "modified_by": "Administrator",
 "module": "Stats",
 "name": "Emp Name List Education Sheet",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}